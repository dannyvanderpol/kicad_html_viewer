"use strict";(()=>{var b=class{constructor(e,t){this.showDebug=t,this.colors=T[e],this.colorPageLimits=this.colors.page_limits,this.colorBackground=this.colors.background}getColor(e,t,s=[0,0,0]){this.showDebug&&console.log("Colors: design type:",e,t.type,s);let a="grey";if(s&&s.some(r=>r!==0))s.length<4&&s.push(1),a=`rgba(${s.join(", ")})`;else if(e=="kicad_wks")a=this.colors.worksheet;else switch(e){case"kicad_sch":switch(t.type){case"junction":a=this.colors.junction;break;default:this.showDebug&&console.warn("Colors: unknown schematic item type:",t.type)}break;case"kicad_pcb":let r=t.layer.split(".");r[1]=="Cu"&&(a=this.colors.copper[r[0].toLowerCase()],a.startsWith("rgb(")&&(a=a.replace("rgb","rgba").replace(")",`, ${D})`)));break;default:this.showDebug&&console.warn("Colors: unknown design type:",e)}return a}},D=.7,T={kicad_pcb:{anchor:"rgb(255, 38, 226)",aux_items:"rgb(255, 255, 255)",b_adhes:"rgb(0, 0, 132)",b_crtyd:"rgb(38, 233, 255)",b_fab:"rgb(88, 93, 132)",b_mask:"rgba(2, 255, 238, 0.400)",b_paste:"rgba(0, 194, 194, 0.902)",b_silks:"rgb(232, 178, 167)",background:"rgb(0, 16, 35)",cmts_user:"rgb(89, 148, 220)",conflicts_shadow:"rgba(255, 0, 5, 0.502)",copper:{b:"rgb(77, 127, 196)",f:"rgb(200, 52, 52)",in1:"rgb(127, 200, 127)",in10:"rgb(237, 124, 51)",in11:"rgb(91, 195, 235)",in12:"rgb(247, 111, 142)",in13:"rgb(167, 165, 198)",in14:"rgb(40, 204, 217)",in15:"rgb(232, 178, 167)",in16:"rgb(242, 237, 161)",in17:"rgb(237, 124, 51)",in18:"rgb(91, 195, 235)",in19:"rgb(247, 111, 142)",in2:"rgb(206, 125, 44)",in20:"rgb(167, 165, 198)",in21:"rgb(40, 204, 217)",in22:"rgb(232, 178, 167)",in23:"rgb(242, 237, 161)",in24:"rgb(237, 124, 51)",in25:"rgb(91, 195, 235)",in26:"rgb(247, 111, 142)",in27:"rgb(167, 165, 198)",in28:"rgb(40, 204, 217)",in29:"rgb(232, 178, 167)",in3:"rgb(79, 203, 203)",in30:"rgb(242, 237, 161)",in4:"rgb(219, 98, 139)",in5:"rgb(167, 165, 198)",in6:"rgb(40, 204, 217)",in7:"rgb(232, 178, 167)",in8:"rgb(242, 237, 161)",in9:"rgb(141, 203, 129)"},cursor:"rgb(255, 255, 255)",drc_error:"rgba(215, 91, 107, 0.800)",drc_exclusion:"rgba(255, 255, 255, 0.800)",drc_warning:"rgba(255, 208, 66, 0.800)",dwgs_user:"rgb(194, 194, 194)",eco1_user:"rgb(180, 219, 210)",eco2_user:"rgb(216, 200, 82)",edge_cuts:"rgb(208, 210, 205)",f_adhes:"rgb(132, 0, 132)",f_crtyd:"rgb(255, 38, 226)",f_fab:"rgb(175, 175, 175)",f_mask:"rgba(216, 100, 255, 0.400)",f_paste:"rgba(180, 160, 154, 0.902)",f_silks:"rgb(242, 237, 161)",grid:"rgb(132, 132, 132)",grid_axes:"rgb(194, 194, 194)",locked_shadow:"rgba(255, 38, 226, 0.502)",margin:"rgb(255, 38, 226)",pad_net_names:"rgba(255, 255, 255, 0.902)",pad_plated_hole:"rgb(194, 194, 0)",page_limits:"rgb(132, 132, 132)",plated_hole:"rgb(26, 196, 210)",ratsnest:"rgba(0, 248, 255, 0.349)",track_net_names:"rgba(255, 255, 255, 0.702)",user_1:"rgb(194, 194, 194)",user_10:"rgb(89, 148, 220)",user_11:"rgb(180, 219, 210)",user_12:"rgb(216, 200, 82)",user_13:"rgb(194, 194, 194)",user_14:"rgb(89, 148, 220)",user_15:"rgb(180, 219, 210)",user_16:"rgb(216, 200, 82)",user_17:"rgb(194, 194, 194)",user_18:"rgb(89, 148, 220)",user_19:"rgb(180, 219, 210)",user_2:"rgb(89, 148, 220)",user_20:"rgb(216, 200, 82)",user_21:"rgb(194, 194, 194)",user_22:"rgb(89, 148, 220)",user_23:"rgb(180, 219, 210)",user_24:"rgb(216, 200, 82)",user_25:"rgb(194, 194, 194)",user_26:"rgb(89, 148, 220)",user_27:"rgb(180, 219, 210)",user_28:"rgb(216, 200, 82)",user_29:"rgb(194, 194, 194)",user_3:"rgb(180, 219, 210)",user_30:"rgb(89, 148, 220)",user_31:"rgb(180, 219, 210)",user_32:"rgb(216, 200, 82)",user_33:"rgb(194, 194, 194)",user_34:"rgb(89, 148, 220)",user_35:"rgb(180, 219, 210)",user_36:"rgb(216, 200, 82)",user_37:"rgb(194, 194, 194)",user_38:"rgb(89, 148, 220)",user_39:"rgb(180, 219, 210)",user_4:"rgb(216, 200, 82)",user_40:"rgb(216, 200, 82)",user_41:"rgb(194, 194, 194)",user_42:"rgb(89, 148, 220)",user_43:"rgb(180, 219, 210)",user_44:"rgb(216, 200, 82)",user_45:"rgb(194, 194, 194)",user_5:"rgb(194, 194, 194)",user_6:"rgb(89, 148, 220)",user_7:"rgb(180, 219, 210)",user_8:"rgb(216, 200, 82)",user_9:"rgb(232, 178, 167)",via_hole:"rgb(227, 183, 46)",via_hole_walls:"rgb(236, 236, 236)",via_net_names:"rgba(50, 50, 50, 0.902)",worksheet:"rgb(200, 114, 171)"},kicad_sch:{anchor:"rgb(0, 0, 255)",aux_items:"rgb(0, 0, 0)",background:"rgb(245, 244, 239)",brightened:"rgb(255, 0, 255)",bus:"rgb(0, 0, 132)",bus_junction:"rgb(0, 0, 132)",component_body:"rgb(255, 255, 194)",component_outline:"rgb(132, 0, 0)",cursor:"rgb(15, 15, 15)",dnp_marker:"rgba(220, 9, 13, 0.851)",erc_error:"rgba(230, 9, 13, 0.800)",erc_exclusion:"rgba(194, 194, 194, 0.800)",erc_warning:"rgba(209, 146, 0, 0.800)",excluded_from_sim:"rgba(194, 194, 194, 0.949)",fields:"rgb(132, 0, 132)",grid:"rgb(181, 181, 181)",grid_axes:"rgb(0, 0, 132)",hidden:"rgb(194, 194, 194)",hovered:"rgb(0, 0, 255)",junction:"rgb(0, 150, 0)",label_global:"rgb(132, 0, 0)",label_hier:"rgb(114, 86, 0)",label_local:"rgb(15, 15, 15)",netclass_flag:"rgb(72, 72, 72)",no_connect:"rgb(0, 0, 132)",note:"rgb(0, 0, 194)",note_background:"rgba(0, 0, 0, 0.000)",op_currents:"rgb(224, 0, 12)",op_voltages:"rgb(132, 0, 50)",override_item_colors:!1,page_limits:"rgb(181, 181, 181)",pin:"rgb(132, 0, 0)",pin_name:"rgb(0, 100, 100)",pin_number:"rgb(169, 0, 0)",private_note:"rgb(72, 72, 255)",reference:"rgb(0, 100, 100)",rule_area:"rgb(255, 0, 0)",shadow:"rgba(102, 179, 255, 0.800)",sheet:"rgb(132, 0, 0)",sheet_background:"rgba(255, 255, 255, 0.000)",sheet_fields:"rgb(132, 0, 132)",sheet_filename:"rgb(114, 86, 0)",sheet_label:"rgb(0, 100, 100)",sheet_name:"rgb(0, 100, 100)",value:"rgb(0, 100, 100)",wire:"rgb(0, 150, 0)",worksheet:"rgb(132, 0, 0)"}};var f=class{constructor(e,t,s,a,r){this.showDebug=r,this.valuesDictionary=a,this.colors=s,this.ctx=e,this.scale=t,this.drawingType=null,this.setup=null,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.pageSize=null,this.margins={left:0,right:0,top:0,bottom:0}}drawPageOutline(e){this.pageSize=e,this.showDebug&&console.log("Drawer: drawing page outline for paper size:",this.pageSize),this.ctx.strokeStyle=this.colors.colorPageLimits,this.ctx.lineWidth=d.pageOutline/this.scale,this.ctx.strokeRect(0,0,this.pageSize.width,this.pageSize.height),this.ctx.canvas.style.backgroundColor=this.colors.colorBackground}drawContent(e){this.drawingType=e.type,this.showDebug&&console.log("Drawer: drawing type:",this.drawingType),this.setup=e.setup,this.margins.left=this.setup&&this.setup.left_margin?parseFloat(this.setup.left_margin):0,this.margins.right=this.setup&&this.setup.right_margin?parseFloat(this.setup.right_margin):0,this.margins.top=this.setup&&this.setup.top_margin?parseFloat(this.setup.top_margin):0,this.margins.bottom=this.setup&&this.setup.bottom_margin?parseFloat(this.setup.bottom_margin):0,this._drawObjects(e),this.drawingType=null}_drawObjects(e,t=null){for(let s in e)s=="layers"?this._drawLayers(e[s]):Array.isArray(e[s])?this._drawObjects(e[s],s):typeof e[s]=="object"&&e[s]!==null&&t!==null&&this._drawObject(t,e[s])}_drawObject(e,t){switch(e){case"junctions":this._drawCircle(t);break;case"lines":this._drawLine(t);break;case"rectangles":this._drawRectangle(t);break;case"texts":this._drawText(t);break;case"paper":case"setup":break;default:this.showDebug&&console.warn("Drawer: unknown type:",e,t)}}_drawLayers(e){this.showDebug&&console.log("Drawer: layers",e);let t=["B.Cu","F.Cu"],s=[];for(let r of t)if(e.hasOwnProperty(r)){this.showDebug&&console.log("Drawer: drawing layer:",r);for(let i in e[r])switch(i){case"zones":for(let o of e[r][i])this._drawPolygon(o);break;default:this.showDebug&&console.warn("Drawer: unknown layer item type:",i)}s.push(r)}let a=Object.keys(e).filter(r=>!s.includes(r));this.showDebug&&a.length>0&&console.warn("Drawer: undrawn layers:",a)}_drawLine(e){this.showDebug&&console.log("Drawer: line",e);let t=this._setThickness(e.type,e.thickness),s=this._correctXY("x",e.start.x,e.start.relative_to),a=this._correctXY("y",e.start.y,e.start.relative_to),r=this._correctXY("x",e.end.x,e.end.relative_to),i=this._correctXY("y",e.end.y,e.end.relative_to);this.ctx.strokeStyle=this.colors.getColor(this.drawingType,e.type),this.ctx.lineWidth=t,this.ctx.beginPath();for(let o=0;o<e.repeat;o++){let n=s+o*e.increment_x,l=a+o*e.increment_y,g=r+o*e.increment_x,p=i+o*e.increment_y;if(n>this.pageSize.width-this.margins.right||l>this.pageSize.height-this.margins.bottom)break;this.showDebug&&console.log(`Drawer: line: (${n}, ${l}) to (${g}, ${p})`),this.ctx.moveTo(n,l),this.ctx.lineTo(g,p)}this.ctx.stroke()}_drawRectangle(e){this.showDebug&&console.log("Drawer: rectangle",e);let t=this._setThickness(e.type,e.thickness),s=this._correctXY("x",e.start.x,e.start.relative_to),a=this._correctXY("y",e.start.y,e.start.relative_to),r=this._correctXY("x",e.end.x,e.end.relative_to),i=this._correctXY("y",e.end.y,e.end.relative_to);this.ctx.strokeStyle=this.colors.getColor(this.drawingType,e.type),this.ctx.lineWidth=t;for(let o=0;o<e.repeat;o++){let n=s+o*e.increment_x,l=a+o*e.increment_y,g=r-o*e.increment_x,p=i-o*e.increment_y;this.showDebug&&console.log(`Drawer: rectangle: (${n}, ${l}) to (${g}, ${p})`),this.ctx.strokeRect(n,l,g-n,p-l)}}_drawCircle(e){this.showDebug&&console.log("Drawer: circle",e),this.ctx.fillStyle=this.colors.getColor(this.drawingType,e,e.color),this.ctx.lineWidth=0,this.ctx.beginPath(),this.ctx.arc(e.pos.x,e.pos.y,e.diameter/2,0,2*Math.PI),this.ctx.fill()}_drawText(e){this.showDebug&&console.log("Drawer:",e);let t=this._correctXY("x",e.pos.x,e.pos.relative_to),s=this._correctXY("y",e.pos.y,e.pos.relative_to),a=this._getTextSize(e.type,e.size);s+=a*.15;let r="";r+=e.bold?"bold ":"",r+=e.italic?"italic ":"",r+=`${a}px `,r+="KiCadFont",this.ctx.font=r,this.ctx.fillStyle=this.colors.getColor(this.drawingType,e.type),this.ctx.textAlign=e.align_h,this.ctx.textBaseline=e.align_v;let i=this._replaceValuesInText(e.text);for(let o=0;o<e.repeat;o++){let n=t+o*e.increment_x,l=s+o*e.increment_y;if(n>this.pageSize.width-this.margins.right||l>this.pageSize.height-this.margins.bottom)break;this.showDebug&&console.log(`Drawer: text: (${n}, ${l}) ${i}`),this.ctx.fillText(i,n,l),e.repeat>1&&(i=this._nextTextSequence(i))}}_drawPolygon(e){if(this.showDebug&&console.log("Drawer: zone",e),e.points.length>1){this.ctx.fillStyle=this.colors.getColor(this.drawingType,e),this.ctx.lineWidth=0,this.ctx.beginPath(),this.ctx.moveTo(e.points[0].x,e.points[0].y);for(let t=1;t<e.points.length;t++)this.ctx.lineTo(e.points[t].x,e.points[t].y);this.ctx.closePath(),this.ctx.fill()}}_correctXY(e,t,s){if(this.drawingType!="kicad_wks")return t;switch(s){case"ltcorner":e=="x"&&(t+=this.margins.left),e=="y"&&(t+=this.margins.top);break;case"rtcorner":e=="x"&&(t=this.pageSize.width-t-this.margins.right),e=="y"&&(t+=this.margins.top);break;case"lbcorner":e=="x"&&(t+=this.margins.left),e=="y"&&(t=this.pageSize.height-t-this.margins.bottom);break;case"rbcorner":e=="x"?t=this.pageSize.width-t-this.margins.right:e=="y"&&(t=this.pageSize.height-t-this.margins.bottom);break;default:this.drawingType=="kicad_wks"&&(t=this._correctXY(e,t,"rbcorner"))}return t}_setThickness(e,t){if(t>0)return t;switch(e){case"line":case"rect":t=this.setup.lineWidth?parseFloat(this.setup.lineWidth):d.lineThickness;break;default:this.showDebug&&console.warn("Drawer: no thickness for:",e)}return t}_getTextSize(e,t){if(t>0)return t;switch(e){case"tbtext":t=this.setup.textSize?parseFloat(this.setup.textSize):d.textSize;break;default:this.showDebug&&console.warn("Drawer: no text size for:",e)}return t}_nextTextSequence(e){return isNaN(e)?e.length==1?e=String.fromCharCode(e.charCodeAt(0)+1):this.showDebug&&console.warn("Drawer: no text sequence for:",e):e=(parseInt(e)+1).toString(),e}_replaceValuesInText(e){for(let t in this.valuesDictionary){let s=`\${${t.toUpperCase()}}`;t=="pageNumber"&&(s="${#}"),t=="totalPages"&&(s="${##}"),this.showDebug&&console.log(`Drawer: replacing ${s} with ${this.valuesDictionary[t]} in ${e}`),e=e.replace(`${s}`,this.valuesDictionary[t]),this.showDebug&&console.log(`Drawer: result: ${e}`)}return e}},d={pageOutline:.3,lineThickness:.152,wireThickness:.152,busThickness:.305,junctionSize:.914,textSize:1.27};function y(){new FontFace("KiCadFont",S.buffer).load().then(function(e){document.fonts.add(e)})}var S=new Uint8Array([119,79,70,50,0,1,0,0,0,0,26,220,0,14,0,0,0,0,59,52,0,0,26,128,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,63,70,70,84,77,28,26,38,6,96,0,130,66,8,4,17,8,10,227,104,201,32,11,129,70,0,1,54,2,36,3,131,8,4,32,5,133,56,7,129,102,27,47,44,51,3,193,198,1,160,12,242,62,217,127,145,192,27,82,255,104,129,152,146,120,105,163,98,17,39,44,194,207,18,59,187,166,222,13,123,248,37,69,56,239,250,65,39,248,6,38,156,8,27,33,201,236,240,188,219,254,207,101,137,121,69,16,46,142,133,224,189,112,113,97,34,136,89,145,130,41,130,22,130,131,114,65,216,216,92,71,150,45,199,170,45,182,223,42,172,23,79,94,203,222,48,27,235,251,74,205,55,166,65,189,255,108,76,123,83,223,48,229,129,239,112,255,70,99,147,70,113,32,97,97,224,105,155,3,108,27,36,20,245,124,131,116,84,193,109,110,31,66,8,61,17,237,62,183,124,22,194,23,136,217,235,237,76,154,168,0,17,219,217,1,46,170,189,40,45,215,2,123,210,70,127,215,155,84,5,147,115,153,76,54,22,74,246,159,165,218,216,120,76,108,34,204,35,165,125,0,18,126,68,114,231,169,243,175,211,92,165,192,1,177,15,166,203,50,220,21,120,237,180,125,125,176,190,244,35,147,28,82,136,20,187,96,8,248,236,130,45,39,125,62,39,5,134,177,119,147,228,144,124,108,231,24,247,78,29,59,222,212,110,67,135,97,232,13,227,214,101,185,196,42,84,15,138,108,71,51,8,214,231,126,246,191,108,230,165,189,219,198,206,132,215,135,6,15,17,135,252,66,219,169,174,4,0,64,1,224,182,99,22,175,249,229,190,40,73,125,243,43,214,10,6,0,87,56,18,72,73,229,124,35,5,0,164,114,232,208,148,56,15,123,81,1,210,46,246,1,96,231,54,2,122,72,24,169,89,19,53,185,123,32,228,164,22,124,234,37,224,26,158,45,199,43,125,192,116,191,5,94,253,74,210,58,237,97,188,140,66,126,100,161,104,33,0,169,12,202,46,164,224,45,166,160,104,91,254,233,246,244,127,185,190,168,188,6,170,142,168,66,145,107,131,237,11,32,128,156,43,213,26,232,57,225,207,121,32,244,63,216,145,124,65,20,138,9,69,184,56,58,38,54,46,94,146,48,51,81,154,36,147,39,43,82,102,165,206,158,51,87,57,47,45,93,165,206,152,159,153,165,201,214,234,114,114,23,44,212,231,25,140,249,5,133,69,166,69,139,139,75,74,203,202,193,217,138,200,106,53,66,165,72,94,106,230,111,113,45,125,252,158,0,251,217,242,76,119,156,126,24,233,94,35,163,234,218,24,101,35,37,10,185,45,206,144,126,4,165,187,38,247,187,10,161,58,35,114,4,13,169,167,77,206,20,76,38,12,167,82,10,181,25,112,32,93,29,123,57,242,131,165,82,65,40,7,102,194,169,156,168,196,57,145,106,21,147,165,103,50,173,176,92,97,14,11,134,217,82,102,37,35,152,44,153,49,67,21,128,195,131,178,66,225,208,80,86,68,176,132,41,152,161,136,136,246,53,224,24,118,100,40,194,229,194,220,74,61,25,150,192,82,157,87,66,23,169,96,148,9,51,3,67,57,179,49,9,51,234,129,35,84,34,172,233,76,35,184,114,88,30,42,79,170,92,87,195,84,89,185,225,146,12,191,27,102,169,38,28,203,174,68,255,30,5,248,12,15,121,130,142,4,92,31,13,165,2,30,51,159,133,196,249,74,18,189,129,194,84,69,238,198,32,9,198,26,77,137,119,42,213,134,142,141,59,185,14,119,145,234,229,135,93,136,36,88,108,8,60,199,83,37,202,20,177,219,39,186,230,162,38,89,31,120,196,25,15,71,116,167,230,105,10,53,91,197,165,44,72,100,171,4,84,169,39,160,6,229,98,38,185,0,18,71,207,115,61,174,255,45,153,227,72,37,14,104,106,145,132,144,141,234,109,32,168,115,241,60,201,197,140,112,146,54,46,75,253,105,198,190,225,23,175,126,240,9,148,13,234,97,250,20,96,1,101,21,27,185,14,137,100,255,96,58,53,112,80,167,221,112,196,177,112,34,22,57,202,13,197,208,40,196,145,56,238,247,33,197,198,49,208,245,0,57,110,160,171,157,77,20,47,75,71,36,99,92,115,200,141,190,22,219,55,62,11,25,142,55,20,45,35,192,124,36,35,134,48,75,241,7,240,237,66,90,218,23,135,85,79,49,28,161,25,74,5,128,44,68,125,86,19,186,144,89,4,172,228,232,25,144,204,68,14,85,35,99,164,121,174,212,173,12,17,100,157,68,40,226,51,80,219,7,21,14,215,227,152,71,36,140,229,88,44,48,145,7,249,72,99,165,216,113,63,86,170,208,137,49,207,230,78,232,147,44,72,36,171,4,136,243,125,75,36,37,118,34,86,6,120,227,157,92,104,131,206,31,166,75,30,29,69,226,60,241,21,106,18,58,155,107,141,110,201,202,63,252,206,66,67,79,34,48,242,69,76,26,170,52,190,244,250,78,70,191,225,90,166,195,50,37,26,142,234,81,140,72,148,0,90,100,140,10,48,174,183,9,39,145,176,137,152,17,150,21,200,22,169,18,26,127,76,182,177,62,108,102,131,248,50,162,71,222,168,251,117,29,104,109,117,128,86,162,71,232,77,154,162,245,169,9,142,179,127,33,119,81,93,177,19,162,157,140,89,4,45,32,91,221,175,251,35,64,114,117,163,88,235,122,131,134,97,170,110,99,172,192,184,90,183,105,111,85,47,171,67,35,218,223,16,237,229,104,4,194,34,50,20,18,9,145,253,169,90,132,82,28,98,175,192,53,83,213,169,152,94,72,6,149,35,50,55,54,20,27,147,234,171,156,213,186,151,67,166,228,6,63,5,140,145,106,105,190,47,82,116,19,202,24,103,76,205,208,59,136,125,65,207,71,65,156,31,209,125,48,24,30,37,219,127,232,203,246,51,155,166,206,173,164,66,19,199,36,79,156,159,116,10,111,239,248,246,247,75,116,247,133,7,247,248,155,187,103,222,39,118,111,217,145,255,194,143,179,24,62,127,26,102,178,77,160,118,16,208,226,143,100,28,66,100,153,4,8,236,181,134,112,237,191,225,157,197,168,210,167,238,183,218,222,10,63,136,166,166,87,145,44,30,161,141,3,65,217,139,167,60,68,35,190,14,26,41,223,60,129,29,157,15,16,97,244,186,19,162,194,115,12,165,34,27,143,4,202,245,254,212,98,181,180,52,30,54,109,228,112,139,159,168,246,205,108,49,244,146,55,139,180,157,195,9,215,8,11,162,241,231,49,150,41,154,29,133,189,118,166,208,229,64,184,239,21,80,49,206,165,98,94,70,30,200,45,65,144,7,162,103,99,112,41,167,209,14,220,170,81,113,13,10,125,171,172,53,153,136,138,56,153,220,98,96,24,22,214,32,139,17,70,191,255,156,174,247,3,76,42,29,32,9,21,254,114,35,183,114,216,70,173,147,128,130,85,135,245,75,181,195,55,127,116,188,34,78,220,89,12,231,28,128,55,76,198,171,241,72,59,251,218,63,40,167,198,67,235,112,185,191,146,217,199,185,23,140,202,196,42,240,234,128,236,118,178,89,18,150,237,174,85,85,159,200,172,116,245,43,244,20,155,228,194,40,218,59,50,146,36,88,153,4,131,117,207,50,21,97,101,28,176,134,18,91,53,252,35,173,63,96,86,221,133,64,100,52,18,105,87,57,172,108,232,230,89,250,40,114,132,56,108,79,28,9,91,149,218,50,21,70,166,29,1,169,137,12,53,104,6,84,197,210,91,181,173,48,242,134,69,20,121,158,27,197,170,0,155,16,31,17,192,7,237,1,47,205,236,204,15,30,158,61,152,155,100,31,131,29,170,180,134,202,93,200,84,4,26,177,5,70,146,225,21,20,166,226,141,38,230,198,86,117,54,104,24,151,94,77,56,244,186,146,247,22,170,79,170,76,11,139,15,0,153,249,34,100,65,12,80,192,64,77,99,218,48,69,101,38,208,191,174,96,227,253,251,162,27,250,15,43,203,65,67,39,116,204,101,91,189,219,141,238,21,4,132,204,5,229,67,44,212,230,14,221,1,185,242,83,181,33,189,14,188,90,236,64,78,63,165,31,125,205,37,159,48,24,226,50,191,134,77,184,146,97,48,239,223,207,130,115,184,12,128,248,8,133,82,119,151,197,197,55,66,85,212,32,201,13,40,26,41,239,65,107,81,239,203,8,217,126,4,173,114,70,222,177,119,85,123,60,240,245,65,233,161,249,80,236,183,117,230,214,220,118,47,6,64,101,41,92,166,133,90,50,141,33,159,229,96,208,33,153,182,193,154,131,129,65,179,12,202,170,215,124,219,66,22,33,224,156,34,47,56,240,173,31,246,86,147,201,107,128,215,103,4,112,82,36,141,227,182,152,180,167,155,23,177,42,211,248,234,210,76,107,52,162,214,37,53,67,98,22,233,53,115,144,97,50,34,100,168,38,34,130,133,193,2,198,190,186,50,196,239,138,108,16,216,170,230,242,231,165,56,139,90,79,162,118,68,240,103,117,95,34,19,162,238,220,129,125,53,69,147,47,164,236,180,44,14,147,97,215,217,113,8,66,17,59,189,52,43,160,108,112,184,227,219,34,235,185,33,28,244,177,118,249,136,79,38,157,103,237,179,33,97,109,232,246,170,47,56,80,52,85,153,250,16,215,142,68,9,70,238,46,136,44,250,154,37,213,77,90,23,212,193,252,79,206,104,38,66,107,136,46,8,251,162,29,169,79,118,71,249,205,162,114,86,27,120,209,171,139,130,170,207,186,150,230,181,4,135,119,52,249,51,66,33,140,173,7,55,117,179,146,239,141,188,42,203,4,176,62,211,91,160,116,70,189,210,48,203,217,32,246,16,160,160,38,144,198,20,124,95,17,210,161,253,105,70,71,22,116,226,224,6,123,248,93,160,106,114,148,224,141,99,31,89,243,139,71,6,180,59,190,166,214,157,93,245,125,9,241,8,22,157,202,54,199,100,191,100,156,193,231,18,82,3,47,60,56,152,150,78,92,83,151,109,188,239,113,233,157,154,158,153,143,140,91,115,116,231,198,185,1,169,103,207,95,253,48,184,234,129,39,173,213,125,145,227,147,211,0,68,30,241,62,242,148,215,95,216,31,231,69,222,54,38,30,51,2,46,118,143,124,71,116,135,236,34,185,64,122,74,252,58,31,67,110,70,203,7,180,63,126,13,156,98,109,102,157,122,174,151,6,8,83,8,93,95,128,52,92,160,197,206,77,124,217,38,127,59,247,6,55,44,94,250,50,219,191,70,80,227,95,28,115,39,155,213,202,111,101,149,200,39,37,215,185,161,146,196,23,109,55,49,60,233,11,45,107,108,3,127,3,10,171,23,182,8,90,192,51,143,92,6,104,155,212,1,243,93,46,72,159,177,76,230,181,112,26,65,25,187,142,253,105,134,197,147,39,134,9,111,244,170,105,21,58,149,172,204,109,38,255,209,96,161,127,211,48,131,59,96,213,8,106,26,103,208,202,231,252,57,85,145,50,209,207,78,229,165,79,75,43,102,206,80,54,50,11,42,157,154,53,77,92,137,35,176,215,100,19,179,206,104,42,211,175,120,3,211,199,219,232,54,163,1,226,251,181,136,157,244,162,107,88,7,126,182,211,187,208,219,136,135,127,133,86,46,210,162,19,107,48,109,215,201,107,187,53,19,90,204,180,98,187,167,91,80,237,197,79,114,111,121,58,75,47,196,8,139,76,110,89,225,46,229,159,148,124,66,159,4,207,10,19,147,198,187,74,78,210,241,42,91,153,204,66,96,24,1,216,127,180,219,97,33,236,40,112,79,188,186,172,55,205,114,58,102,180,10,102,230,207,45,232,189,107,91,121,22,53,226,22,15,34,58,122,0,70,4,168,43,211,211,93,33,200,160,120,8,105,31,107,49,188,25,101,241,243,13,22,30,230,128,43,97,187,46,10,203,55,202,80,173,9,208,34,119,32,185,209,152,152,160,20,251,75,185,40,129,121,235,200,94,207,53,227,105,60,109,226,224,136,223,126,220,15,223,175,32,143,245,15,222,93,124,215,233,90,236,242,172,62,247,45,196,2,140,196,235,183,222,58,138,63,238,98,160,252,128,41,216,146,24,126,184,53,33,123,123,80,118,208,54,107,144,163,219,111,117,173,135,195,145,99,113,70,250,39,45,128,160,46,136,20,188,128,4,5,55,83,200,171,52,224,56,13,56,133,50,227,251,71,58,15,3,242,133,117,170,48,167,147,213,144,135,56,210,74,18,101,21,121,6,9,42,135,90,252,157,167,195,230,200,195,173,51,179,183,7,106,71,162,219,28,221,126,59,253,150,35,128,65,254,34,216,223,87,163,9,239,169,109,61,216,147,203,123,88,171,152,219,80,251,224,193,242,142,185,138,218,135,82,239,57,120,104,121,79,225,239,213,248,130,237,207,197,3,156,137,41,50,128,15,32,83,19,120,80,60,152,57,119,240,186,53,165,33,56,158,81,39,45,206,172,206,73,72,33,18,19,250,69,243,121,193,32,174,86,102,8,246,15,54,60,143,7,14,222,77,140,120,201,148,48,95,70,196,246,64,156,247,225,249,242,119,4,23,138,222,229,94,40,219,45,184,233,79,7,176,137,45,14,223,60,95,71,30,106,177,54,25,101,120,118,20,5,63,72,165,93,165,81,133,135,18,117,143,150,27,154,172,132,30,173,95,160,71,137,71,96,144,199,212,36,79,222,141,71,119,158,211,109,241,119,39,21,201,236,29,231,239,73,0,17,44,127,134,51,191,115,113,250,68,151,56,247,33,50,116,159,115,73,212,199,113,165,42,149,106,115,86,84,224,98,246,237,192,121,60,165,50,99,249,46,192,248,102,171,29,190,1,59,180,40,161,182,26,228,104,118,17,172,245,198,48,155,184,165,150,216,140,184,197,110,100,130,185,87,119,175,186,255,90,68,105,242,157,222,110,103,183,223,152,216,45,126,109,53,90,0,133,156,46,246,32,83,124,103,97,255,207,20,95,123,14,102,54,86,171,101,152,214,4,95,135,77,152,86,166,174,54,154,115,48,187,239,75,216,129,151,43,58,141,58,229,119,249,155,203,189,35,167,71,122,47,47,63,187,128,93,8,96,157,176,205,242,95,120,236,167,63,6,56,78,204,201,25,72,101,59,133,78,118,106,230,207,157,24,120,210,122,150,171,7,180,134,5,254,63,113,218,185,110,220,205,93,20,240,112,170,203,247,54,220,149,19,69,168,171,12,114,76,99,242,185,12,23,97,217,50,99,149,138,200,65,29,240,109,95,123,14,74,24,172,99,184,59,122,204,111,208,213,215,251,227,201,159,62,239,115,13,250,245,254,233,254,47,28,176,79,212,57,224,163,136,27,247,32,123,186,221,234,10,142,62,157,215,9,31,131,59,117,168,77,109,53,202,48,109,22,124,21,214,16,51,177,170,9,29,250,45,253,216,255,205,188,148,56,231,108,13,124,5,130,214,123,33,232,65,145,76,103,19,240,43,12,196,66,247,169,17,103,119,99,183,115,228,212,79,113,44,32,91,82,113,55,194,11,61,166,134,140,70,218,182,46,248,203,54,119,228,27,4,48,5,181,14,248,24,236,24,104,134,65,30,204,130,49,56,107,148,78,136,201,132,242,37,135,116,185,193,106,180,180,144,166,132,174,136,71,27,146,47,199,10,82,19,235,118,247,157,30,217,246,147,179,175,177,207,249,211,182,145,211,125,75,60,207,144,26,49,158,113,25,0,195,82,219,233,179,31,238,204,68,205,106,181,74,46,208,104,224,62,8,90,79,163,70,29,8,148,101,174,139,226,143,212,140,231,181,195,251,57,125,120,31,167,165,174,79,105,101,47,252,25,122,125,236,245,118,198,36,35,22,149,157,5,95,134,53,81,26,161,1,152,153,23,230,156,252,188,173,110,83,221,225,207,61,127,196,186,29,52,255,16,61,93,243,38,230,77,205,116,252,162,137,16,197,112,69,79,109,24,203,205,152,94,10,168,21,56,112,85,236,49,190,22,191,54,122,252,140,49,220,50,241,162,120,16,193,124,52,168,70,102,76,208,193,209,116,250,142,133,128,150,109,93,55,199,235,63,86,38,227,55,187,30,142,63,185,127,52,237,168,28,101,28,136,152,73,198,96,255,96,227,243,235,80,48,3,77,101,150,91,241,84,244,167,219,19,225,19,183,93,40,53,254,214,31,180,158,110,101,65,3,51,46,180,59,224,235,176,253,255,20,1,166,166,131,53,14,202,85,4,213,124,231,221,16,71,87,132,193,207,107,180,196,119,113,36,105,63,126,58,141,23,180,57,170,95,116,244,236,34,118,71,34,210,63,188,121,179,75,180,189,170,78,223,84,168,223,180,139,53,236,187,72,164,223,234,165,199,29,190,98,238,20,159,111,36,244,162,139,190,121,190,93,122,17,145,127,200,40,199,245,217,128,106,92,157,220,120,24,159,137,59,142,169,7,127,32,224,78,115,243,70,15,209,86,124,122,62,221,186,34,99,143,64,181,174,204,200,88,233,2,123,50,86,172,156,159,45,138,208,69,127,218,180,41,166,78,95,185,189,11,103,173,63,137,111,175,220,52,162,77,93,65,160,168,43,53,85,116,50,176,64,191,169,176,248,7,208,87,109,231,51,7,5,83,138,169,193,55,138,55,131,211,138,105,160,119,236,138,220,95,114,85,73,2,218,199,121,81,171,245,121,243,110,41,148,183,44,105,155,163,44,217,143,1,233,154,50,39,55,238,175,218,181,128,218,97,66,134,16,198,210,208,171,194,136,97,90,141,114,250,96,198,193,250,19,45,104,1,1,155,60,50,35,144,205,203,70,1,73,200,32,178,164,42,125,220,229,28,89,116,191,166,44,130,188,228,243,244,146,70,156,174,225,48,16,240,77,187,141,174,163,219,8,236,120,171,113,76,236,17,143,121,74,35,102,151,67,30,240,148,252,93,203,52,112,158,7,101,16,72,230,193,63,107,108,61,78,96,109,125,90,45,237,56,14,130,30,70,104,149,180,23,153,195,3,72,129,6,13,80,9,30,165,235,231,142,232,137,22,173,206,32,92,192,65,143,204,36,188,56,78,137,46,178,229,4,129,173,167,95,231,173,126,226,118,51,197,205,130,221,75,5,187,99,1,181,163,24,25,66,234,17,57,186,27,201,13,187,143,184,197,30,228,126,122,110,86,170,111,7,217,149,23,138,57,158,39,12,225,67,180,74,8,238,159,0,220,63,218,109,244,74,184,83,139,226,255,67,234,68,243,120,101,2,205,26,43,173,159,234,95,214,158,30,17,159,20,194,64,36,179,162,17,123,196,30,206,130,229,11,56,30,207,196,212,124,85,203,169,190,96,8,17,115,0,117,116,79,25,76,71,6,126,179,7,119,35,233,123,248,209,82,106,180,186,150,19,4,106,163,235,68,200,165,46,141,24,140,40,157,133,0,26,187,121,113,198,154,154,49,241,16,254,96,214,172,185,31,93,43,12,108,188,38,127,207,153,49,4,34,200,9,0,85,255,206,61,56,240,214,35,241,158,8,160,228,181,7,76,111,125,248,122,106,235,116,199,74,214,120,33,234,110,155,71,233,49,149,234,94,39,207,2,148,155,109,129,175,118,175,109,92,197,241,136,135,56,98,127,13,253,237,150,181,13,43,171,34,88,228,118,7,124,196,157,34,204,70,173,246,240,108,105,103,50,188,218,83,15,107,117,107,15,92,3,40,184,199,30,138,197,14,83,189,24,52,170,163,177,220,68,107,52,175,77,118,185,121,205,144,110,118,187,234,119,26,32,141,90,197,155,228,243,64,179,169,43,28,146,215,112,154,13,114,67,133,218,214,110,135,73,185,99,95,14,235,133,241,110,231,192,162,187,78,215,56,96,158,104,182,251,236,245,177,207,23,88,12,243,231,183,198,8,246,32,180,73,42,226,172,98,90,173,144,50,34,176,135,148,29,128,55,169,166,189,38,229,170,197,212,73,26,184,199,168,44,210,14,79,120,221,111,58,120,120,69,237,198,182,221,216,109,27,107,37,173,43,102,179,47,9,47,177,51,135,142,3,228,188,60,100,8,73,2,24,55,113,64,53,211,199,36,128,131,19,90,212,14,179,191,155,121,118,89,64,243,217,169,85,149,11,116,150,176,164,103,23,4,45,237,118,30,76,181,142,3,134,101,179,185,230,93,78,96,178,168,31,210,100,43,5,221,151,211,92,210,111,42,35,236,168,114,222,74,77,209,77,68,143,193,146,80,237,240,116,208,100,156,254,214,115,92,174,32,207,30,165,76,91,212,107,140,24,216,229,195,140,21,106,27,32,159,200,196,61,200,61,196,99,213,158,9,117,21,54,209,131,0,106,71,187,216,141,52,142,56,93,245,46,231,72,35,50,8,220,123,105,136,214,18,195,131,180,183,62,180,161,185,46,205,236,57,172,172,205,105,117,168,153,57,42,206,61,206,59,158,235,79,215,12,40,228,182,54,84,181,191,194,186,77,233,224,247,72,42,182,237,171,80,161,109,121,233,48,89,44,185,248,165,86,185,172,157,29,131,178,135,223,37,129,217,226,116,64,97,19,88,203,185,81,35,217,254,131,131,220,182,179,255,110,8,156,109,13,56,244,126,1,124,248,133,27,80,44,160,252,81,39,171,61,251,203,18,158,112,182,86,214,250,1,245,8,193,58,37,184,252,129,72,57,196,110,36,52,252,150,247,147,145,203,243,79,76,98,0,233,155,98,102,5,235,192,21,21,89,193,92,155,180,54,246,28,96,69,54,128,44,232,60,143,188,43,184,89,180,187,236,2,151,70,95,40,122,7,144,70,181,53,224,226,26,147,219,219,2,63,203,190,145,168,145,227,181,240,202,227,23,225,250,114,149,23,190,120,124,37,12,4,5,73,198,16,86,136,58,73,109,115,3,242,205,179,167,208,251,75,75,6,4,7,177,151,211,2,189,203,236,62,123,124,236,25,81,63,172,22,100,105,124,178,32,72,8,1,148,115,73,56,20,152,228,206,239,49,63,234,251,53,252,172,44,120,106,225,107,86,127,127,7,72,190,83,51,121,235,159,214,62,160,103,147,63,161,11,25,9,251,93,157,88,159,184,238,239,99,9,128,66,236,18,123,144,95,34,205,160,60,53,44,132,101,132,63,112,208,152,216,141,96,16,52,4,65,137,136,117,233,62,189,57,229,97,179,94,1,240,180,190,211,103,135,79,147,26,163,127,74,77,165,159,171,42,222,232,252,202,185,177,184,234,172,247,108,202,167,222,106,180,169,208,210,169,66,45,178,24,149,144,175,213,192,207,225,44,190,14,83,99,106,51,8,19,4,19,38,29,178,15,138,120,196,99,65,76,60,34,66,85,72,228,40,103,153,190,254,242,145,145,225,145,35,151,235,245,96,160,181,43,165,118,233,78,92,142,79,3,231,248,175,34,153,212,21,29,138,250,180,72,81,29,250,67,144,14,173,155,141,62,45,242,40,0,73,88,131,233,214,60,225,255,24,166,8,236,72,174,79,238,0,108,88,97,186,112,69,231,117,169,139,119,239,212,221,207,189,32,228,249,60,100,72,60,136,141,178,12,46,66,117,91,158,128,199,203,89,104,18,189,198,117,161,28,222,239,99,119,158,89,233,227,19,245,3,121,223,200,197,46,231,72,106,130,56,104,154,137,8,45,121,159,9,188,191,215,172,67,70,85,132,103,220,222,202,17,232,180,173,93,87,4,127,200,64,255,99,245,138,69,46,214,231,1,86,165,17,39,198,201,143,62,233,143,94,138,234,128,189,186,0,38,118,143,197,76,53,141,225,99,77,111,99,94,55,77,225,83,242,239,98,38,145,143,225,34,81,246,150,167,11,81,135,175,136,251,74,252,138,27,90,120,252,248,222,9,210,60,181,59,30,207,152,120,80,60,214,255,197,32,243,90,97,96,211,240,77,170,234,107,64,247,54,180,239,113,206,250,7,120,63,167,78,196,23,132,139,162,63,65,64,50,5,228,32,67,92,158,251,169,3,174,130,29,58,172,113,105,129,29,60,96,10,158,146,82,93,13,235,38,48,240,253,14,69,49,222,241,126,178,192,197,186,114,224,232,33,4,164,248,130,92,228,1,18,233,153,232,130,171,141,184,98,98,11,150,235,185,192,45,36,122,184,167,236,138,146,203,254,183,147,99,4,147,205,14,184,6,118,228,8,205,198,165,6,185,80,167,129,95,193,26,167,203,13,75,141,230,4,194,47,210,9,109,11,49,157,105,182,9,51,179,173,87,12,57,239,127,227,118,14,21,251,5,47,191,125,249,66,160,136,70,17,15,62,134,155,69,53,26,1,80,160,36,176,58,61,45,58,97,20,113,227,110,196,59,227,150,156,49,215,119,59,71,190,52,84,151,5,76,108,158,19,243,60,28,183,103,30,165,117,223,239,168,109,1,238,125,110,123,213,64,210,57,18,116,24,185,204,241,239,37,179,152,243,209,78,56,147,227,18,187,56,179,235,218,123,107,144,110,81,31,2,190,88,111,247,89,179,74,206,29,244,9,165,56,232,203,2,111,27,195,230,109,206,181,253,176,69,160,93,165,83,141,171,184,229,251,76,180,211,103,191,79,231,232,129,253,156,197,244,159,235,254,182,249,217,254,177,52,89,181,38,42,91,3,104,96,205,15,192,231,155,101,89,117,239,14,99,193,221,43,234,21,243,118,76,231,105,209,91,81,109,22,92,157,230,232,52,173,193,22,172,94,31,59,137,28,56,87,107,121,203,187,128,76,198,133,218,126,40,219,223,155,3,4,247,101,14,223,205,190,61,121,232,248,22,60,219,4,127,128,0,83,254,177,117,182,67,219,15,109,183,173,219,41,48,15,128,156,179,252,179,57,3,192,6,242,244,189,245,250,45,85,171,159,21,15,243,135,139,215,60,219,92,165,175,191,187,80,239,252,47,231,134,228,225,234,234,201,234,201,213,15,37,231,115,62,250,79,15,226,83,189,58,134,157,119,63,186,59,220,224,165,30,238,117,247,122,238,101,120,53,222,251,104,192,57,112,207,238,37,187,210,235,233,117,95,5,249,133,43,75,203,246,46,219,187,172,172,116,19,171,236,218,67,8,210,58,147,43,202,13,102,109,164,104,19,243,166,80,21,126,96,222,190,207,135,203,192,44,68,56,192,121,55,220,33,44,238,78,230,12,32,46,130,47,57,19,224,59,90,66,208,67,252,164,97,82,63,118,2,155,70,199,186,100,170,116,89,23,230,77,149,168,44,36,132,78,152,236,166,200,140,78,99,95,20,197,224,23,217,84,239,10,64,115,1,202,104,19,175,130,213,200,172,224,5,241,124,128,52,26,23,166,98,132,120,91,76,14,77,151,172,183,167,75,17,173,232,170,180,144,117,105,28,38,139,119,8,67,85,82,217,9,133,118,44,93,133,53,0,71,161,12,240,49,200,202,218,144,122,209,227,17,58,133,30,190,209,156,33,200,82,212,194,253,29,18,94,194,60,137,42,51,184,179,235,64,32,62,245,188,23,5,188,158,121,142,70,117,191,103,146,73,32,85,66,46,161,130,76,45,13,154,12,12,194,145,207,40,251,203,99,214,82,109,169,95,234,95,244,8,242,179,207,73,11,65,166,126,174,14,119,61,249,103,1,160,35,125,6,23,253,33,126,166,150,160,0,11,169,119,65,243,86,137,108,118,166,35,128,116,0,160,62,69,24,67,191,75,110,14,252,182,154,127,117,102,205,225,115,102,16,183,170,80,232,3,249,55,91,210,110,90,124,207,196,207,66,221,127,164,215,157,201,234,148,180,243,21,219,159,148,29,145,210,239,230,118,92,82,111,201,26,160,169,141,98,179,41,183,144,225,40,138,238,25,220,7,229,109,52,103,211,195,163,238,57,118,229,185,180,61,81,208,81,69,29,178,168,191,204,233,103,26,47,41,155,39,165,175,164,167,33,237,149,184,250,200,251,155,114,31,88,222,12,169,185,36,229,16,195,207,62,165,27,82,143,79,125,118,226,99,83,156,72,198,81,204,92,182,216,131,68,203,51,35,105,216,61,19,53,213,179,51,79,34,107,1,188,92,170,74,37,182,212,172,88,98,203,32,105,14,233,132,100,199,102,72,184,217,225,41,183,139,34,85,217,254,144,244,138,164,212,32,109,199,200,226,151,54,196,16,83,184,174,227,50,207,9,249,181,83,173,161,238,19,137,179,193,245,147,111,185,184,56,196,86,217,108,86,143,10,109,87,2,121,128,146,19,59,65,15,115,110,27,53,14,36,14,136,183,191,28,36,94,161,231,32,139,90,185,131,194,59,236,29,84,126,225,22,74,195,218,223,200,96,102,110,52,218,1,228,128,248,251,191,131,132,97,218,65,150,185,0,7,133,255,154,29,84,225,115,156,41,13,127,223,74,183,214,58,181,108,150,91,106,153,74,60,34,22,184,175,155,73,114,213,73,197,4,171,141,172,202,173,177,82,149,173,139,179,4,74,213,62,154,167,194,90,107,250,72,230,152,173,202,232,75,17,120,84,8,18,175,121,195,114,22,229,144,40,34,14,212,246,235,16,82,196,39,215,72,113,141,191,101,179,20,14,252,87,55,124,22,252,119,32,206,185,209,90,190,102,101,213,154,184,37,214,234,184,47,134,73,250,116,126,125,229,114,75,249,18,145,242,135,56,161,52,252,92,230,2,112,0,114,88,213,32,84,178,89,107,165,144,193,231,158,182,86,218,214,174,156,37,61,28,111,169,42,171,148,179,1,63,242,178,17,128,12,129,148,12,134,152,85,21,219,199,145,224,73,73,67,144,224,180,100,177,143,162,218,100,240,125,251,0,157,196,182,212,202,155,25,39,225,165,240,232,10,193,147,28,171,160,96,67,98,144,207,151,108,5,182,156,161,58,30,137,98,9,140,64,164,128,175,197,209,37,146,132,56,137,72,75,40,107,172,144,34,97,119,172,184,42,201,157,119,122,192,211,34,151,249,211,236,157,159,111,255,159,132,206,219,12,62,96,190,24,252,48,177,248,99,227,64,112,5,8,20,36,88,136,80,97,194,69,224,137,196,39,16,5,133,17,18,193,137,69,139,17,43,78,60,137,4,51,37,146,74,34,35,151,76,33,197,44,169,102,155,99,46,165,121,210,164,83,81,203,48,95,166,44,26,217,180,116,114,228,90,96,225,114,118,121,12,140,242,21,40,84,196,100,145,197,138,149,40,85,166,28,0,0,0]);var u=class{constructor(e,t){this.filename=e,this.showDebug=t}async loadFile(){let e={};this.showDebug&&console.log("Reader: load file:",this.filename);try{let t=await fetch(this.filename);if(!t.ok)this.showDebug&&console.error(`Reader: HTTP error status: ${t.status}`);else{let s=await t.text();e=this.parseFile(s),e.filename=this.filename,this.showDebug&&console.log("Reader: file loaded successfully")}}catch(t){this.showDebug&&console.error("Reader: error loading file:",t)}return e}parseFile(e){let t={sheetpath:"/",pageNumber:1,totalPages:1,lines:[],rectangles:[],texts:[],junctions:[],layers:[]},s=this._getSections(e);if(s.length!=1)throw new Error("Reader: invalid file format");let a=this._getSectionName(s[0]);t.type=a;for(let r of this._getSections(s[0].substring(1,s[0].length-1)))switch(a=this._getSectionName(r),a){case"generator_version":t.version=this._getValues(r)[0];break;case"junction":let i=this._getProperties(r);i.type=a,i.pos={},i.pos.x=parseFloat(i.at[0]),i.pos.y=parseFloat(i.at[1]),i.diameter=parseFloat(i.diameter[0]),i.color=i.color.map(n=>parseInt(n)),delete i.at,delete i.uuid,t.junctions.push(i);break;case"line":t.lines.push(this._readGraphics(r,a));break;case"paper":t.paper=this._getValues(r)[0];break;case"rect":t.rectangles.push(this._readGraphics(r,a));break;case"setup":t.setup=this._getProperties(r,!0);break;case"tbtext":t.texts.push(this._readText(r,a));break;case"title_block":t.titleBlock=this._getProperties(r,!0);break;case"uuid":t.uuid=this._getValues(r)[0];break;case"zone":let o=this._readZones(r,a);for(let n of o)t.layers[n.layer]??={zones:[]},t.layers[n.layer].zones.push(n);break;case"embedded_fonts":case"generator":case"version":break;default:this.showDebug&&(console.warn("Reader: Unknown section:",a),console.log(r))}return this.showDebug&&console.log("Reader: parsed content:",t),t}_getSections(e){let t=[],s=-1,a=0;for(let r=0;r<e.length;r++)e[r]=="("?(a==0&&(s=r),a+=1):e[r]==")"&&(a-=1),a==0&&s>=0&&r>s&&(t.push(e.substring(s,r+1)),a=0,s=-1);return t}_getSectionName(e){let t="";for(let s=2;s<e.length;s++)if([" ","\r",`
`,"	",")"].includes(e[s])){t=e.substring(1,s);break}return t.trim()}_getValues(e){e=e.replace(/[\r\n\t]/g," ").replace(/ +/g," "),this.showDebug&&console.log("Reader: parse values:",e);let t=[],s=e.indexOf(" ");if(s>0){let a=s,r="";for(let i=s;i<e.length-1;i++){if(e[i]==" "&&r==""||e[i]=='"'&&r==" "||e[i]=="("&&r==" "){a=i+1,r=e[i]=="("?")":e[i];continue}r!=""&&(e[i]==r||i==e.length-2)&&(t.push(e.substring(a,i+1).trim().replace(/^"|"$/g,"").replace(/\)$/g,"")),r==")"&&(r=""),a=i+1)}}return this.showDebug&&console.log("Reader: parsed values:",t),t}_getProperties(e,t=!1){let s={};for(let a of this._getSections(e.substring(1,e.length-1))){let r=this._getValues(a),i=this._getSectionName(a);i=="comment"&&(i="comment"+r[0],r=[r[1]]),t&&r.length>=1&&(r=r[0]),s[i]=r}return s}_readGraphics(e,t){let s={type:t,thickness:0,start:{x:0,y:0,relative_to:null},end:{x:0,y:0,relative_to:null},repeat:1,increment_x:0,increment_y:0};for(let a of this._getSections(e.substring(1,e.length-1))){let r=this._getSectionName(a),i=this._getValues(a);switch(r){case"start":s.start.x=parseFloat(i[0]),s.start.y=parseFloat(i[1]),i.length>2&&(s.start.relative_to=i[2]);break;case"end":s.end.x=parseFloat(i[0]),s.end.y=parseFloat(i[1]),i.length>2&&(s.end.relative_to=i[2]);break;case"repeat":s.repeat=parseInt(i[0]);break;case"incrx":s.increment_x=parseFloat(i[0]);break;case"incry":s.increment_y=parseFloat(i[0]);break}}return s}_readText(e,t){let s={type:t,text:"",size:0,pos:{x:0,y:0,relative_to:null},repeat:1,increment_x:0,increment_y:0,bold:!1,italic:!1,align_h:"left",align_v:"middle",mirror:!1};s.text=this._getValues(e)[0];for(let a of this._getSections(e.substring(1,e.length-1))){let r=this._getSectionName(a);switch(r){case"font":for(let o of this._getValues(a))o.startsWith("size ")&&(s.size=parseFloat(o.split(" ")[1])),o=="bold"&&(s.bold=!0),o=="italic"&&(s.italic=!0);break;case"incrx":s.increment_x=parseFloat(this._getValues(a)[0]);break;case"incry":s.increment_y=parseFloat(this._getValues(a)[0]);break;case"justify":for(let o of this._getValues(a))["left","center","right"].includes(o)&&(s.align_h=o),["top","middle","bottom"].includes(o)&&(s.align_v=o),o=="mirror"&&(s.mirror=!0);break;case"pos":let i=this._getValues(a);s.pos.x=parseFloat(i[0]),s.pos.y=parseFloat(i[1]),i.length>2&&(s.pos.relative_to=i[2]);break;case"repeat":s.repeat=parseInt(this._getValues(a)[0]);break;case"comment":case"name":break;default:this.showDebug&&console.warn("Reader: unknown text subsection:",r)}}return s}_readZones(e,t){let s=[];for(let a of this._getSections(e.substring(1,e.length-1))){let r=this._getSectionName(a);switch(r){case"filled_polygon":let i={type:t,layer:"",points:[]},o=this._getProperties(a);i.layer=o.layer[0];for(let n of o.pts){let l=n.split(" ");l.length==3&&l[0]=="xy"&&i.points.push({x:parseFloat(l[1]),y:parseFloat(l[2])})}s.push(i);break;case"attr":case"connect_pads":case"fill":case"filled_areas_thickness":case"hatch":case"layer":case"min_thickness":case"name":case"net":case"net_name":case"polygon":case"priority":case"uuid":break;default:this.showDebug&&console.warn("Reader: unknown zone subsection:",r)}}return s}};var x='(kicad_wks (version 20231118) (generator "pl_editor") (generator_version "9.0") (setup (textsize 1.5 1.5) (linewidth 0.15) (textlinewidth 0.15) (left_margin 10) (right_margin 10) (top_margin 10) (bottom_margin 10)) (rect (name "") (start 110 34) (end 2 2) (comment "rect around the title block")) (rect (name "") (start 0 0 ltcorner) (end 0 0) (repeat 2) (incrx 2) (incry 2)) (line (name "") (start 50 2 ltcorner) (end 50 0 ltcorner) (repeat 30) (incrx 50)) (tbtext "1" (name "") (pos 25 1 ltcorner) (font (size 1.3 1.3)) (repeat 100) (incrx 50)) (line (name "") (start 50 2 lbcorner) (end 50 0 lbcorner) (repeat 30) (incrx 50)) (tbtext "1" (name "") (pos 25 1 lbcorner) (font (size 1.3 1.3)) (repeat 100) (incrx 50)) (line (name "") (start 0 50 ltcorner) (end 2 50 ltcorner) (repeat 30) (incry 50)) (tbtext "A" (name "") (pos 1 25 ltcorner) (font (size 1.3 1.3)) (justify center) (repeat 100) (incry 50)) (line (name "") (start 0 50 rtcorner) (end 2 50 rtcorner) (repeat 30) (incry 50)) (tbtext "A" (name "") (pos 1 25 rtcorner) (font (size 1.3 1.3)) (justify center) (repeat 100) (incry 50)) (tbtext "Date: ${ISSUE_DATE}" (name "") (pos 87 6.9)) (line (name "") (start 110 5.5) (end 2 5.5)) (tbtext "${KICAD_VERSION}" (name "") (pos 109 4.1) (comment "Kicad version")) (line (name "") (start 110 8.5) (end 2 8.5)) (tbtext "Rev: ${REVISION}" (name "") (pos 24 6.9) (font bold)) (tbtext "Size: ${PAPER}" (name "") (pos 109 6.9) (comment "Paper format name")) (tbtext "Id: ${#}/${##}" (name "") (pos 24 4.1) (comment "Sheet id")) (line (name "") (start 110 12.5) (end 2 12.5)) (tbtext "Title: ${TITLE}" (name "") (pos 109 10.7) (font (size 2 2) bold italic)) (tbtext "File: ${FILENAME}" (name "") (pos 109 14.3)) (line (name "") (start 110 18.5) (end 2 18.5)) (tbtext "Sheet: ${SHEETPATH}" (name "") (pos 109 17)) (tbtext "${COMPANY}" (name "") (pos 109 20) (font bold) (comment "Company name")) (tbtext "${COMMENT1}" (name "") (pos 109 23) (comment "Comment 0")) (tbtext "${COMMENT2}" (name "") (pos 109 26) (comment "Comment 1")) (tbtext "${COMMENT3}" (name "") (pos 109 29) (comment "Comment 2")) (tbtext "${COMMENT4}" (name "") (pos 109 32) (comment "Comment 3")) (line (name "") (start 90 8.5) (end 90 5.5)) (line (name "") (start 26 8.5) (end 26 2)))';var m=class{constructor(){this.fileType=null,this.designObjects=[],this.graphicsObjects=[]}};async function v(h){let e=null;try{let t=await fetch(h);t.ok||console.error(`fetchFile: HTTP error status: ${t.status}`),e=await t.text()}catch(t){console.error("fetchFile: error loading file:",t)}return e}async function k(h){let e=new m,t=await v(h);return e}var w=class{constructor(e,t){this.debug=c.OFF,this.canvas=e,this.filename=t,this.content=null,this.sheet=null,this.colors=null,this.pageSize=_.A4,this.viewportTransform={x:0,y:0,scale:1},this.fitScaleX=1,this.fitScaleY=1,this.scaleSpeed=1/250,this.minScale=1/50,this.previousX=0,this.previousY=0,this.isMoving=!1,this.canvas.addEventListener("mousedown",this._onMouseDown.bind(this)),this.canvas.addEventListener("mouseup",this._onMouseUp.bind(this)),this.canvas.addEventListener("mousemove",this._onMouseMove.bind(this)),this.canvas.addEventListener("wheel",this._onMouseWheel.bind(this)),this.valuesDictionary={paper:"",sheetpath:"",filename:"",title:"",kicad_version:"",issue_date:"",revision:"",pageNumber:"",totalPages:"",company:"",comment1:"",comment2:"",comment3:"",comment4:""}}async initialize(){let e=await k(this.filename);console.log(e),this.debug&c.VIEWER&&console.log("Viewer: drawing KiCad content");let t=new u(this.filename,this.debug&c.READER);this.content=await t.loadFile(),this.debug&c.GENERAL&&console.log("Load default sheet"),t=new u("pageLayout",this.debug&c.READER),this.sheet=t.parseFile(x),this.colors=new b(this.content.type,this.debug&c.COLORS),this.pageSize=_[this.content.paper],this.pageSize||(this.debug&c.GENERAL&&console.warn("Unknown page size:",this.content.paper),this.pageSize=_.A4),this.valuesDictionary.paper=this.content.paper,this.valuesDictionary.sheetpath=this.content.sheetpath,this.valuesDictionary.filename=this.content.filename,this.valuesDictionary.title=this.content.titleBlock.title,this.valuesDictionary.kicad_version="KiCad V"+this.content.version,this.valuesDictionary.issue_date=this.content.titleBlock.date,this.valuesDictionary.pageNumber=this.content.pageNumber,this.valuesDictionary.totalPages=this.content.totalPages,this.valuesDictionary.revision=this.content.titleBlock.rev||"",this.valuesDictionary.company=this.content.titleBlock.company||"",this.valuesDictionary.comment1=this.content.titleBlock.comment1||"",this.valuesDictionary.comment2=this.content.titleBlock.comment2||"",this.valuesDictionary.comment3=this.content.titleBlock.comment3||"",this.valuesDictionary.comment4=this.content.titleBlock.comment4||"",this.fitScaleX=this.canvas.width/this.pageSize.width,this.fitScaleY=this.canvas.height/this.pageSize.height,this.viewportTransform.scale=Math.min(this.fitScaleX,this.fitScaleY)*.98,this.viewportTransform.x=(this.canvas.width-this.pageSize.width*this.viewportTransform.scale)/2,this.viewportTransform.y=(this.canvas.height-this.pageSize.height*this.viewportTransform.scale)/2,this._render()}_render(){let e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width,this.canvas.height);let t=this.viewportTransform.scale/this.fitScaleX,s=this.viewportTransform.scale/this.fitScaleY,a=this.canvas.width*.95,r=-this.canvas.width*.95,i=this.canvas.height*.95,o=-this.canvas.height*.95;this.viewportTransform.x=this.viewportTransform.x>a?a:this.viewportTransform.x,this.viewportTransform.x=this.viewportTransform.x/t<r?r*t:this.viewportTransform.x,this.viewportTransform.y=this.viewportTransform.y>i?i:this.viewportTransform.y,this.viewportTransform.y=this.viewportTransform.y/s<o?o*s:this.viewportTransform.y,e.setTransform(this.viewportTransform.scale,0,0,this.viewportTransform.scale,this.viewportTransform.x,this.viewportTransform.y);let n=new f(e,this.viewportTransform.scale,this.colors,this.valuesDictionary,this.debug&c.DRAWER);n.drawPageOutline(this.pageSize),n.drawContent(this.sheet),n.drawContent(this.content)}_onMouseDown(e){this.debug&c.EVENTS&&console.log("Mouse down:",e),this.previousX=e.clientX,this.previousY=e.clientY,this.isMoving=!0}_onMouseUp(e){this.debug&c.EVENTS&&console.log("Mouse up:",e),this.isMoving=!1}_onMouseMove(e){if(!this.isMoving)return;this.debug&c.EVENTS&&console.log("Mouse move:",e);let t=e.clientX,s=e.clientY;this.viewportTransform.x+=t-this.previousX,this.viewportTransform.y+=s-this.previousY,this.previousX=t,this.previousY=s,this._render()}_onMouseWheel(e){this.debug&c.EVENTS&&console.log("Mouse wheel:",e),e.preventDefault();let t=this.viewportTransform.x,s=this.viewportTransform.y,a=e.clientX,r=e.clientY,i=this.viewportTransform.scale;this.viewportTransform.scale+=e.deltaY*-this.scaleSpeed,this.viewportTransform.scale<this.minScale&&(this.viewportTransform.scale=this.minScale),this.viewportTransform.x=a-(a-t)*(this.viewportTransform.scale/i),this.viewportTransform.y=r-(r-s)*(this.viewportTransform.scale/i),this._render()}},_={A0:{width:1189,height:841},A1:{width:841,height:594},A2:{width:594,height:420},A3:{width:420,height:297},A4:{width:297,height:210}},c={OFF:0,VIEWER:1,READER:2,DRAWER:4,COLORS:8,ALL:255};document.addEventListener("DOMContentLoaded",async function(){y();for(let h of document.querySelectorAll('canvas[type="application/kicad"]')){let e=h.getAttribute("src");e&&await new w(h,e).initialize()}});})();
